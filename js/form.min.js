import{i as p}from"./functions.min.js";import{f as a}from"./_functions.min.js";function g(){function l(){const n=document.forms;if(n.length)for(const t of n)t.hasAttribute("data-fls-form-novalidate")||t.setAttribute("novalidate",!0),t.addEventListener("submit",function(o){const s=o.target;e(s,o)}),t.addEventListener("reset",function(o){const s=o.target;a.formClean(s)});async function e(t,o){if(a.getErrors(t)===0)if(t.dataset.flsForm==="ajax"){o.preventDefault();const r=t.getAttribute("action")?t.getAttribute("action").trim():"#",u=t.getAttribute("method")?t.getAttribute("method").trim():"GET",c=new FormData(t);t.classList.add("--sending");const f=await fetch(r,{method:u,body:c});if(f.ok){let m=await f.json();t.classList.remove("--sending"),i(t,m)}else t.classList.remove("--sending")}else t.dataset.flsForm==="dev"&&(o.preventDefault(),i(t));else if(o.preventDefault(),t.querySelector(".--form-error")&&t.hasAttribute("data-fls-form-gotoerr")){const r=t.dataset.flsFormGotoerr?t.dataset.flsFormGotoerr:".--form-error";p(r)}}function i(t,o=""){document.dispatchEvent(new CustomEvent("formSent",{detail:{form:t}})),setTimeout(()=>{if(window.flsPopup){const s=t.dataset.flsFormPopup;s&&window.flsPopup.open(s)}},0),a.formClean(t)}}function d(){document.body.addEventListener("focusin",function(n){const e=n.target;(e.tagName==="INPUT"||e.tagName==="TEXTAREA")&&(e.hasAttribute("data-fls-form-nofocus")||(e.classList.add("--form-focus"),e.parentElement.classList.add("--form-focus")),e.hasAttribute("data-fls-form-validatenow")&&a.removeError(e))}),document.body.addEventListener("focusout",function(n){const e=n.target;(e.tagName==="INPUT"||e.tagName==="TEXTAREA")&&(e.hasAttribute("data-fls-form-nofocus")||(e.classList.remove("--form-focus"),e.parentElement.classList.remove("--form-focus")),e.hasAttribute("data-fls-form-validatenow")&&a.validateInput(e))})}l(),d()}document.querySelector("[data-fls-form]")&&window.addEventListener("load",g);
